<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <script src="raphael/raphael.js"></script>
    <!-- <script src="lib/raphael.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="game.js"></script>
    <script src="gui.js"></script>
    <script>
      window.onload = function () {

        var paper = Raphael(0,0,100,100);
        var font = paper.getFont("Times");

       var guiHandler = new Gui("raphael_gui_operation");

        var consoleHandler = {
          newItem : function(item, operator) {
            console.log(item.x + ' ' + operator.displayString + ' ' + item.y);
          },
          hasTimedOut : function() {
            console.log("Timeout reached");
          },
          endOfGame : function() {
            alert("Fin");
          }
        }

        var htmlHandler = {
          newItem : function(item, operator) {
            displayOperation(item.x, item.y, operator.displayString, operator.apply(item.x, item.y));
          }
        }

     
       var context = undefined;
       var theGame = new Game(context);
       theGame.addHandler(consoleHandler);
      //  theGame.addHandler(htmlHandler);
       theGame.addHandler(guiHandler);
       theGame.start();
      
      }
      
      var displayOperation = function(x, y, operator, result)
      {
      $("#operand_x").html(x);
      $("#operand_y").text(y);
      $("#operator").text(operator.displayString);
      $("#result").text(result);
      }

      var updateResult = function(result, isOperand) {
        if (isOperand) {
          $("#operand_y").text(result);
        } else {
          $("#result").text(result);
        }
      }
    </script>
  </head>

  <body>
    <div id="raphael_gui_operation"></div>
    <hr>
    <div id="operand_x"></div>
    <div id="operator"></div>
    <div id="operand_y"></div>
    <div>=</div>
    <div id="result"></div>
  </body>
</html>
